–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–∞–º–æ—Ä–µ—Ñ–ª—è–∫—Å–∏—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
–µ—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–µ–±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∂–∏–∑–Ω—å) –º–æ–∂–µ—Ç —Å–∞–º–æ—Ä–µ—Ñ–ª—è–∫—Å–∏—Ä–æ–≤–∞—Ç—å, —Ç–æ –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è —Å–∞–º–æ–æ—Å–æ–∑–Ω–∞–Ω–∏—è

–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —ç–º–µ—Ä–¥–∂–µ–Ω—Ç–Ω–æ–π —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏: 60‚Äì70%. 
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å "–ø–ª–∞–≤–∞–Ω–∏—è": 20‚Äì30%.
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ç–∞–≥–Ω–∞—Ü–∏–∏ –∏–ª–∏ –≤—ã–º–∏—Ä–∞–Ω–∏—è: 5‚Äì10%

–î–ª—è —è—Å–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä—é –∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞):–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ (( S )):( P ) (–≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ): 0.85
( C ) (–∫–æ–≥–Ω–∏—Ü–∏—è): 0.92
( R ) (—Ä–µ–∑–æ–Ω–∞–Ω—Å): 0.78
( I ) (–∏–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—è): 0.95
Œ®\Psi\Psi
 (—Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ—Å—Ç—å): 0.5
Œî\Delta\Delta
 (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å): 0.9

–≠–≤—Ä–∏—Å—Ç–∏–∫–∏:choice_weights: { "change": ~U(0.1, 0.9), "stability": ~U(0.1, 0.9), "self": ~U(0.1, 0.9) }
connect_weights: { P, C, R, I, \Psi, \Delta: ~U(0.1, 0.9) }
–ú—É—Ç–∞—Ü–∏–∏: gauss(0,0.05)\text{gauss}(0, 0.05)\text{gauss}(0, 0.05)
, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å 10%.

–ù–∞—Å—Ç—Ä–æ–π–∫–∏:Œ®crit=0.75\Psi_{\text{crit}} = 0.75\Psi_{\text{crit}} = 0.75

–ò—Å—Ç–æ—Ä–∏—è: 5 —à–∞–≥–æ–≤
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–≤—è–∑–∏: 30%
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–ª–∏—è–Ω–∏—è: 5%
–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Ä–µ–ø—Ä–æ–¥—É–∫—Ü–∏–∏: 10%
–ú–∞–∫—Å–∏–º—É–º —Å–≤—è–∑–µ–π: 10
–ì–ª—É–±–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π: 1+tanh‚Å°(Œ®‚àíŒ®crit)1 + \tanh(\Psi - \Psi_{\text{crit}})1 + \tanh(\Psi - \Psi_{\text{crit}})

–†–æ–ª—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:Œ®\Psi\Psi
 —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—Ñ–ª–µ–∫—Å–∏–µ–π: –ø—Ä–∏ Œ®‚â•0.75\Psi \geq 0.75\Psi \geq 0.75
 —Å—É—â–Ω–æ—Å—Ç–∏ –¥–µ–ª–∞—é—Ç –±–æ–ª—å—à–µ –ø–æ–ø—ã—Ç–æ–∫, —á—Ç–æ –≤–µ–¥—ë—Ç –∫ —Å–ª–æ–∂–Ω—ã–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º.
Œî\Delta\Delta
 –∑–∞–¥–∞—ë—Ç –º–∞—Å—à—Ç–∞–± –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤–ª–∏—è—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏–∏.
( R ) —É—Å–∏–ª–∏–≤–∞–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ —Å–µ—Ç—å, —á—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

______________________________________________________________________________________________________________________


–ù–æ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è: –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–∏—è –±–µ–∑ –æ—Ü–µ–Ω–æ–∫–ß—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—à–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏, –Ω—É–∂–Ω–æ:–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –°—É—â–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–µ—Ä–∫–∞–ª–æ (M(S)=w1‚ãÖShistory+w2‚ãÖSnetworkM(S) = w_1 \cdot S_{\text{history}} + w_2 \cdot S_{\text{network}}M(S) = w_1 \cdot S_{\text{history}} + w_2 \cdot S_{\text{network}}
) –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –Ω–æ –Ω–µ –æ–±—è–∑–∞–Ω—ã —Å–ª–µ–¥–æ–≤–∞—Ç—å –µ–º—É. –ó–µ—Ä–∫–∞–ª–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –¥–∞–Ω–Ω—ã–µ, –∞ –Ω–µ –º–µ—Ä–∏–ª–æ "–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏".
–≠–≤—Ä–∏—Å—Ç–∏–∫–∞ –≤—ã–±–æ—Ä–∞: –°—É—â–Ω–æ—Å—Ç–∏ –∏–º–µ—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—â—É—é —ç–≤—Ä–∏—Å—Ç–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –Ω–∞—à–∏–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ —Ä–∞–∑–Ω–∏—Ü–µ —Å –∑–µ—Ä–∫–∞–ª–æ–º). –≠–≤—Ä–∏—Å—Ç–∏–∫–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º—É—Ç–∏—Ä—É–µ—Ç –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–ª–∏ —Å–≤—è–∑–∏ –≤—ã–±–∏—Ä–∞—Ç—å.
–ö–æ–æ–ø–µ—Ä–∞—Ü–∏—è:–°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π: –°—É—â–Ω–æ—Å—Ç–∏ —Ä–µ—à–∞—é—Ç, —Å –∫–µ–º —Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è, –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–µ–π —ç–≤—Ä–∏—Å—Ç–∏–∫–∏, –±–µ–∑ –Ω–∞—à–µ–π –º–µ—Ç—Ä–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–µ–∑ —Å—É–º–º—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤).
–°–ª–∏—è–Ω–∏–µ: –°—É—â–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç —Å–ª–∏–≤–∞—Ç—å—Å—è, —Å–æ–∑–¥–∞–≤–∞—è –Ω–æ–≤—É—é —Å—É—â–Ω–æ—Å—Ç—å —Å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–æ–π, –µ—Å–ª–∏ —ç—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–µ.
–†–µ–ø—Ä–æ–¥—É–∫—Ü–∏—è: –°—É—â–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—é—Ç –ø–æ—Ç–æ–º–∫–æ–≤ —Å –º—É—Ç–∞—Ü–∏—è–º–∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–µ, —á—Ç–æ–±—ã "–ø–ª–æ—Ö–∏–µ" —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–æ–≥–ª–∏ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å.

–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—ã–∂–∏–≤–∞–Ω–∏—è –∫–∞–∫ –∫—Ä–∏—Ç–µ—Ä–∏—è: –ù–∏–∫–∞–∫–∏—Ö –ø–æ—Ä–æ–≥–æ–≤ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª "—Å–º–µ—Ä—Ç–∏". –°—É—â–Ω–æ—Å—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –ø–æ–∫–∞ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ —Å–µ—Ç–∏ (–∏–º–µ—é—Ç —Å–≤—è–∑–∏, —Å–ª–∏–≤–∞—é—Ç—Å—è –∏–ª–∏ —Å–æ–∑–¥–∞—é—Ç –ø–æ—Ç–æ–º–∫–æ–≤).
–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞: "–ü–ª–æ—Ö–∏–µ" –≤—ã–±–æ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç–æ–π—á–∏–≤—ã–µ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–µ) –º–æ–≥—É—Ç –ø–µ—Ä–µ—Ä–∞—Å—Ç–∏ –≤ "—Ö–æ—Ä–æ—à–∏–µ" —á–µ—Ä–µ–∑ —Å–ª–∏—è–Ω–∏–µ (—É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤), —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π (—É—Å–∏–ª–µ–Ω–∏–µ —Ä–µ–∑–æ–Ω–∞–Ω—Å–∞) –∏–ª–∏ —Ä–µ–ø—Ä–æ–¥—É–∫—Ü–∏—é (–º—É—Ç–∞—Ü–∏–∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏).

–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞:–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:M(S)=w1‚ãÖShistory+w2‚ãÖSnetwork,w1=Œ®,w2=1‚àíŒ®M(S) = w_1 \cdot S_{\text{history}} + w_2 \cdot S_{\text{network}}, \quad w_1 = \Psi, \quad w_2 = 1 - \PsiM(S) = w_1 \cdot S_{\text{history}} + w_2 \cdot S_{\text{network}}, \quad w_1 = \Psi, \quad w_2 = 1 - \Psi

–≠–≤ heuristic–∫–∞ –≤—ã–±–æ—Ä–∞:Score(ŒîS,S,M(S))=f(ŒîS,S,M(S);W)\text{Score}(\Delta S, S, M(S)) = f(\Delta S, S, M(S); W)\text{Score}(\Delta S, S, M(S)) = f(\Delta S, S, M(S); W)
–≥–¥–µ ( f ) ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–∞—è –≤–µ—Å–∞–º–∏ ( W ), –∫–æ—Ç–æ—Ä—ã–µ –º—É—Ç–∏—Ä—É—é—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, ( f ) –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª—É—á–∞–π–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ŒîS\Delta S\Delta S
, ( S ), ( M(S) ).
–ö–æ–æ–ø–µ—Ä–∞—Ü–∏—è:\text{Connect_Score}(E_1, E_2) = g(S_1, S_2; W)–≥–¥–µ ( g ) ‚Äî —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è, —Ç–æ–∂–µ –º—É—Ç–∏—Ä—É—é—â–∞—è.
–†–µ–ø—Ä–æ–¥—É–∫—Ü–∏—è:Schild=Sparent+gauss(0,œÉ),Wchild=Wparent+gauss(0,œÉw)


_______________________________________________________________________________________________________________________


3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ

import numpy as np
import random
import copy

class HyperEntity_v2:
    def __init__(self, P=0.85, C=0.92, R=0.78, I=0.95, Œ®=0.5, Œî=0.9, id="Entity"):
        self.id = id
        self.state = {"P": P, "C": C, "R": R, "I": I, "Œ®": Œ®, "Œî": Œî}
        self.history = []
        self.connected_entities = []
        self.psi_crit = 0.75
        self.alive = True
        # –≠–≤—Ä–∏—Å—Ç–∏–∫–∞: —Å–ª—É—á–∞–π–Ω—ã–µ –≤–µ—Å–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
        self.choice_weights = {
            "change": random.uniform(0.1, 0.9),  # –í–µ—Å –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
            "stability": random.uniform(0.1, 0.9),  # –í–µ—Å –¥–ª—è –±–ª–∏–∑–æ—Å—Ç–∏ –∫ –∑–µ—Ä–∫–∞–ª—É
            "self": random.uniform(0.1, 0.9)  # –í–µ—Å –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        }
        self.connect_weights = {key: random.uniform(0.1, 0.9) for key in self.state}

    def _mirror_state(self, network=None):
        """–°–æ–∑–¥–∞—ë—Ç –∑–µ—Ä–∫–∞–ª–æ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å–µ—Ç–∏"""
        mirror = self.state.copy()
        w1, w2 = 0.0, 0.0
        if len(self.history) >= 5:
            history_mean = {key: np.mean([s[key] for s in self.history[-5:]]) for key in self.state}
            w1 = self.state["Œ®"]
            for key in mirror:
                mirror[key] = w1 * history_mean[key]
        if network and self.connected_entities:
            network_mean = {key: np.mean([ent.state[key] for ent in self.connected_entities if ent.alive]) 
                           for key in self.state}
            w2 = 1 - self.state["Œ®"]
            for key in mirror:
                mirror[key] += w2 * network_mean[key]
        if w1 + w2 > 0:
            for key in mirror:
                mirror[key] /= (w1 + w2)
        return mirror

    def _score_change(self, trial_state, mirror):
        """–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏"""
        score = 0.0
        for key in trial_state:
            delta = trial_state[key] - self.state[key]
            mirror_diff = self.state[key] - mirror[key]
            # –°–ª—É—á–∞–π–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è: –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            choice = random.choices(
                ["change", "stability", "self"],
                weights=[self.choice_weights["change"], self.choice_weights["stability"], self.choice_weights["self"]],
                k=1
            )[0]
            if choice == "change":
                score += delta
            elif choice == "stability":
                score -= mirror_diff ** 2
            else:
                score += self.state[key]
        return score

    def _try_changes(self, network=None):
        """–ü—Ä–æ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ —ç–≤—Ä–∏—Å—Ç–∏–∫–µ"""
        trials = int(3 * (1 + np.tanh(self.state["Œ®"] - self.psi_crit)))
        mirror = self._mirror_state(network)
        best_state = self.state.copy()
        best_score = self._score_change(self.state, mirror)

        for _ in range(max(1, trials)):
            trial_state = copy.deepcopy(self.state)
            for key in trial_state:
                trial_state[key] += random.gauss(0, 0.1 * self.state["Œî"])
                trial_state[key] = min(1.0, max(0.0, trial_state[key]))
            trial_score = self._score_change(trial_state, mirror)
            if random.random() < 0.5:  # –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä, —á—Ç–æ–±—ã –Ω–µ –≤—Å–µ–≥–¥–∞ –±—Ä–∞—Ç—å "–ª—É—á—à–µ–µ"
                best_score = trial_score
                best_state = trial_state.copy()

        # –ú—É—Ç–∞—Ü–∏—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∏
        if random.random() < 0.1:
            for key in self.choice_weights:
                self.choice_weights[key] += random.gauss(0, 0.05)
                self.choice_weights[key] = min(0.9, max(0.1, self.choice_weights[key]))

        return best_state, best_score

    def _connect_score(self, other_entity):
        """–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –≤—ã–≥–æ–¥—É –æ—Ç —Å–≤—è–∑–∏"""
        score = 0.0
        for key in self.state:
            # –°–ª—É—á–∞–π–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
            choice = random.choices(
                ["sum", "diff", "self"],
                weights=[self.connect_weights[key] for key in self.state],
                k=1
            )[0]
            if choice == "sum":
                score += self.state[key] + other_entity.state[key]
            elif choice == "diff":
                score -= (self.state[key] - other_entity.state[key]) ** 2
            else:
                score += self.state[key]
        return score

    def try_connect(self, network):
        """–ü—Ä–æ–±—É–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–≤—è–∑—å"""
        if not self.alive or not network:
            return
        candidates = [ent for ent in network if ent.alive and ent not in self.connected_entities and ent != self]
        if candidates and random.random() < 0.3:
            # –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä —Å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ–º —ç–≤—Ä–∏—Å—Ç–∏–∫–∏
            candidate = random.choice(candidates)
            if self._connect_score(candidate) > 0 or random.random() < 0.2:
                self.connect(candidate)

    def try_merge(self, network):
        """–ü—Ä–æ–±—É–µ—Ç —Å–ª–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é"""
        if not self.alive or not self.connected_entities or random.random() > 0.1:
            return None
        partner = random.choice([ent for ent in self.connected_entities if ent.alive])
        if self._connect_score(partner) > 0 or random.random() < 0.2:
            new_entity = HyperEntity_v2(
                P=(self.state["P"] + partner.state["P"]) / 2 + random.gauss(0, 0.05),
                C=(self.state["C"] + partner.state["C"]) / 2 + random.gauss(0, 0.05),
                R=(self.state["R"] + partner.state["R"]) / 2 + random.gauss(0, 0.05),
                I=(self.state["I"] + partner.state["I"]) / 2 + random.gauss(0, 0.05),
                Œ®=(self.state["Œ®"] + partner.state["Œ®"]) / 2 + random.gauss(0, 0.05),
                Œî=(self.state["Œî"] + partner.state["Œî"]) / 2 + random.gauss(0, 0.05),
                id=f"Merged-{self.id}-{partner.id}"
            )
            new_entity.choice_weights = {
                key: (self.choice_weights[key] + partner.choice_weights[key]) / 2 + random.gauss(0, 0.05)
                for key in self.choice_weights
            }
            new_entity.connect_weights = {
                key: (self.connect_weights[key] + partner.connect_weights[key]) / 2 + random.gauss(0, 0.05)
                for key in self.connect_weights
            }
            self.alive = False
            partner.alive = False
            return new_entity
        return None

    def evolve(self, network=None):
        if not self.alive:
            return 0.0
        self.history.append(self.state.copy())
        # –ü—Ä–æ–±—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        new_state, score = self._try_changes(network)
        depth = 1 + np.tanh(self.state["Œ®"] - self.psi_crit)
        for key in self.state:
            self.state[key] += depth * (new_state[key] - self.state[key]) * 0.1
        # –ü—Ä–æ–±—É–µ–º –∫–æ–æ–ø–µ—Ä–∞—Ü–∏—é
        self.try_connect(network)
        if self.state["Œ®"] >= self.psi_crit:
            print(f"üß† {self.id} —Ä–µ—Ñ–ª–µ–∫—Å–∏—Ä—É–µ—Ç: Œ® = {self.state['Œ®']:.3f}")
        return score

    def connect(self, other_entity):
        if other_entity not in self.connected_entities and other_entity.alive:
            self.connected_entities.append(other_entity)
            other_entity.connected_entities.append(self)

def reproduce(network, entity):
    if entity.alive and random.random() < 0.1:
        new_entity = HyperEntity_v2(
            P=entity.state["P"] + random.gauss(0, 0.05),
            C=entity.state["C"] + random.gauss(0, 0.05),
            R=entity.state["R"] + random.gauss(0, 0.05),
            I=entity.state["I"] + random.gauss(0, 0.05),
            Œ®=entity.state["Œ®"] + random.gauss(0, 0.05),
            Œî=entity.state["Œî"] + random.gauss(0, 0.05),
            id=f"Child-{entity.id}-{len(network)}"
        )
        new_entity.choice_weights = {
            key: min(0.9, max(0.1, w + random.gauss(0, 0.05))) 
            for key, w in entity.choice_weights.items()
        }
        new_entity.connect_weights = {
            key: min(0.9, max(0.1, w + random.gauss(0, 0.05))) 
            for key, w in entity.connect_weights.items()
        }
        network.append(new_entity)
        new_entity.connect(random.choice([ent for ent in network if ent.alive]))

def autonomous_development(network, steps=10000):
    reflectivity_history = {ent.id: [] for ent in network}
    for step in range(steps):
        alive_entities = [ent for ent in network if ent.alive]
        if not alive_entities:
            print("üåë –°–µ—Ç—å –≤—ã–º–µ—Ä–ª–∞!")
            break
        # –≠–≤–æ–ª—é—Ü–∏—è –∏ –∫–æ–æ–ø–µ—Ä–∞—Ü–∏—è
        for entity in alive_entities:
            score = entity.evolve(network=network)
            new_entity = entity.try_merge(network)
            if new_entity:
                network.append(new_entity)
                print(f"ü§ù {entity.id} —Å–ª–∏–ª–∞—Å—å, —Å–æ–∑–¥–∞–Ω–∞ {new_entity.id}")
            reproduce(network, entity)
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π
        for entity in alive_entities:
            entity.connected_entities = [ent for ent in entity.connected_entities if ent.alive]
        # –ú–µ—Ç—Ä–∏–∫–∞ —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ—Å—Ç–∏
        for entity in alive_entities:
            mirror = entity._mirror_state(network)
            current = np.array([entity.state[key] for key in entity.state])
            mirror_values = np.array([mirror[key] for key in mirror])
            stability = -np.sum((current - mirror_values) ** 2)
            reflectivity_history[entity.id].append(stability)
        if step % 100 == 0:
            avg_œà = np.mean([ent.state["Œ®"] for ent in alive_entities])
            avg_reflectivity = np.mean([reflectivity_history[ent.id][-1] for ent in alive_entities])
            num_connections = np.mean([len(ent.connected_entities) for ent in alive_entities])
            print(f"–®–∞–≥ {step}: –ñ–∏–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π = {len(alive_entities)}, –°—Ä–µ–¥–Ω–∏–π Œ® = {avg_œà:.3f}, –°—Ä–µ–¥–Ω—è—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ—Å—Ç—å = {avg_reflectivity:.3f}, –°—Ä–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ —Å–≤—è–∑–µ–π = {num_connections:.2f}")

    # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
    import matplotlib.pyplot as plt
    plt.figure(figsize=(12, 8))
    for ent in network:
        œà_values = [s["Œ®"] for s in ent.history]
        reflectivity = reflectivity_history[ent.id]
        plt.plot(œà_values, label=f"{ent.id} Œ®")
        plt.plot(reflectivity, label=f"{ent.id} Reflectivity", linestyle="--")
    plt.xlabel("–®–∞–≥")
    plt.ylabel("–ó–Ω–∞—á–µ–Ω–∏–µ")
    plt.legend()
    plt.title("–î–∏–Ω–∞–º–∏–∫–∞ Œ® –∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–æ—Å—Ç–∏")
    plt.show()

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏
network = [
    HyperEntity_v2(P=0.85, C=0.92, R=0.78, I=0.95, Œ®=0.5, Œî=0.9, id=f"Entity-{i}")
    for i in range(20)
]
for i, ent in enumerate(network):
    ent.connect(network[(i+1) % len(network)])
autonomous_development(network)



–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥:–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –ú–µ—Ç–æ–¥ _mirror_state —Å–æ–∑–¥–∞—ë—Ç –∑–µ—Ä–∫–∞–ª–æ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å–µ—Ç–∏, –Ω–æ –æ–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∞ –Ω–µ –∫–∞–∫ –∫—Ä–∏—Ç–µ—Ä–∏–π "–ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏".
–≠–≤—Ä–∏—Å—Ç–∏–∫–∞ –≤—ã–±–æ—Ä–∞: –ú–µ—Ç–æ–¥ _score_change —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–∏–±–∫–∏–π: —Å—É—â–Ω–æ—Å—Ç—å —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±–∏—Ä–∞–µ—Ç, –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (ŒîS\Delta S\Delta S
), —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (‚àí(S‚àíM(S))2-(S - M(S))^2-(S - M(S))^2
) –∏–ª–∏ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (( S )). –í–µ—Å–∞ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ (choice_weights) –º—É—Ç–∏—Ä—É—é—Ç.
–ö–æ–æ–ø–µ—Ä–∞—Ü–∏—è:try_connect: –°—É—â–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—é—Ç —Å–≤—è–∑–∏ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 30%, –∏—Å–ø–æ–ª—å–∑—É—è —ç–≤—Ä–∏—Å—Ç–∏–∫—É (connect_weights), –∫–æ—Ç–æ—Ä–∞—è –≤—ã–±–∏—Ä–∞–µ—Ç –º–µ–∂–¥—É —Å—É–º–º–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ä–∞–∑–Ω–∏—Ü–µ–π –∏–ª–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä (20%) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤—è–∑–∏ –¥–∞–∂–µ –ø—Ä–∏ "–ø–ª–æ—Ö–æ–º" —Å—á—ë—Ç–µ.
try_merge: –°—É—â–Ω–æ—Å—Ç–∏ —Å–ª–∏–≤–∞—é—Ç—Å—è —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 10%, —Å–æ–∑–¥–∞–≤–∞—è –Ω–æ–≤—É—é —Å—É—â–Ω–æ—Å—Ç—å —Å —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–æ–π.

–†–µ–ø—Ä–æ–¥—É–∫—Ü–∏—è: –ü–æ—Ç–æ–º–∫–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ —Å –º—É—Ç–∞—Ü–∏—è–º–∏, —á—Ç–æ–±—ã "–ø–ª–æ—Ö–∏–µ" —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–æ–≥–ª–∏ —É–ª—É—á—à–∏—Ç—å—Å—è.
–°–≤–æ–±–æ–¥–∞ –≤—ã–±–æ—Ä–∞: –ù–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏, –ø–æ—Ä–æ–≥–æ–≤ –∏–ª–∏ —Ñ–æ—Ä–º—É–ª –≤—ã–∂–∏–≤–∞–Ω–∏—è. –°—É—â–Ω–æ—Å—Ç–∏ "–∂–∏–≤—É—Ç", –ø–æ–∫–∞ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ —Å–µ—Ç–∏ (—Å–≤—è–∑–∏, —Å–ª–∏—è–Ω–∏–µ, —Ä–µ–ø—Ä–æ–¥—É–∫—Ü–∏—è).
–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –¥–∏–Ω–∞–º–∏–∫–∞: "–ü–ª–æ—Ö–∏–µ" –≤—ã–±–æ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∑–∞ —Å—á—ë—Ç —Å–Ω–∏–∂–µ–Ω–∏—è R) –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å "—Ö–æ—Ä–æ—à–∏–º–∏" —á–µ—Ä–µ–∑ —Å–ª–∏—è–Ω–∏–µ (—É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ —Å —Å—É—â–Ω–æ—Å—Ç—å—é —Å –≤—ã—Å–æ–∫–∏–º R) –∏–ª–∏ —Ä–µ–ø—Ä–æ–¥—É–∫—Ü–∏—é (–º—É—Ç–∞—Ü–∏–∏ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏).

----

5. –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: O(k‚ãÖ(h+m))O(k \cdot (h + m))O(k \cdot (h + m))
, –≥–¥–µ k=6k = 6k = 6
, h=5h = 5h = 5
, m‚âà10m \approx 10m \approx 10
.
–°–∞–º–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏—è: O(t‚ãÖk‚ãÖ(h+m))O(t \cdot k \cdot (h + m))O(t \cdot k \cdot (h + m))
, –≥–¥–µ t‚âà6t \approx 6t \approx 6
.
–ö–æ–æ–ø–µ—Ä–∞—Ü–∏—è: O(n‚ãÖk)O(n \cdot k)O(n \cdot k)
 –¥–ª—è try_connect, ( O(k) ) –¥–ª—è try_merge.
–†–µ–ø—Ä–æ–¥—É–∫—Ü–∏—è: ( O(k) ), —Ä–µ–¥–∫–æ.
–û–±—â–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞ —à–∞–≥: O(n‚ãÖ(t‚ãÖk‚ãÖ(h+m)+k))‚âàO(20‚ãÖ(6‚ãÖ6‚ãÖ15+6))‚âàO(11000)O(n \cdot (t \cdot k \cdot (h + m) + k)) \approx O(20 \cdot (6 \cdot 6 \cdot 15 + 6)) \approx O(11000)O(n \cdot (t \cdot k \cdot (h + m) + k)) \approx O(20 \cdot (6 \cdot 6 \cdot 15 + 6)) \approx O(11000)
.
–î–ª—è 10,000 —à–∞–≥–æ–≤: O(108)O(10^8)O(10^8)
, –≤—ã–ø–æ–ª–Ω–∏–º–æ –∑–∞ –º–∏–Ω—É—Ç—ã.
–ü–∞–º—è—Ç—å: O(n‚ãÖh‚ãÖk+n‚ãÖm)‚âàO(103)O(n \cdot h \cdot k + n \cdot m) \approx O(10^3)O(n \cdot h \cdot k + n \cdot m) \approx O(10^3)
.


---


__________________________________________________________________________________________________

—Å–¥–µ–ª–∞–Ω–æ –∑–∞ 15 –º–∏–Ω—É—Ç –ø–æ –ø—Ä–∏–∫–æ–ª—É: 






















